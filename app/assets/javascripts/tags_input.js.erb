var tagWordsOriginInputId = '#task_tag_words';
var tagWordsInputId = '#task_tag_words_tag';

var activateTagsInput = function(element) {
  var d = new $.Deferred;

  $(element).tagsInput({
    defaultText: '',
    width: 'inherit',
    height: '3rem',
    delimiter: [' ']
  });

  d.resolve();
  return d.promise();
};

var prepareTagsInput = function() {
  if ( $(tagWordsOriginInputId).attr('value') ) {
    activateTagsInput($(tagWordsOriginInputId));
  } else {
    $(tagWordsOriginInputId).on('focusin', function() {
      activateTagsInput(this)
      .then(function() {
        $(tagWordsInputId).focus();
      });
    });
  }
};

var setupTagsInput = function() {
  if ( $(tagWordsOriginInputId).length ) {
    prepareTagsInput();
  }
};

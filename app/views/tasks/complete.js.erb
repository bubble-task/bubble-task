<% must_remove = request.referer =~ %r{tasks/\d+\z} ? false : true %>

Materialize.toast('<%= t('activemodel.messages.task_completion.success') %>', 3000, 'success');

<% if must_remove -%>
  $('#<%= task_css_id(@task.id) %>').remove();
<% else -%>
  $('#task_<%= @task.id %>_completion_state').html('<%= j(render(partial: 'tasks/task_completion', locals: { task: @task })) %>');
<% end -%>
